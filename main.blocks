<xml xmlns="https://developers.google.com/blockly/xml"><variables></variables><block type="pxt-on-start" id="VDLAAc}ERfnd96?#e#kK" x="54" y="57"><statement name="HANDLER"><block type="typescript_statement" id="GSlVVa)Y]%:u4[bq^i~z"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace custom {" line1="" line2="    // タイヤの左右を選択するための設定" line3="    export enum TireDirection {" line4="        //% block=&quot;右&quot;" line5="        Right," line6="        //% block=&quot;左&quot;" line7="        Left" line8="    }" line9="" line10="    // タイヤの動作を選択するための設定" line11="    export enum TireAction {" line12="        //% block=&quot;回す&quot;" line13="        Move," line14="        //% block=&quot;止める&quot;" line15="        Stop" line16="    }" line17="" line18="    // センサーの左右を選択するための設定" line19="    export enum SensorDirection {" line20="        //% block=&quot;右&quot;" line21="        Right," line22="        //% block=&quot;左&quot;" line23="        Left" line24="    }" line25="" line26="    // ===================================" line27="    // ここからモーター制御のブロック" line28="    // ===================================" line29="" line30="    /**" line31="     * 指定した速さで直進します。左右のタイヤが同じ速度で回転します。" line32="     * @param speed 回転速度 (0-1023)。例: 800" line33="     */" line34="    //% block=&quot;直進する 速さ %speed&quot;" line35="    //% speed.min=0 speed.max=1023" line36="    //% group=&quot;モーター制御&quot;" line37="    export function goStraight(speed: number): void {" line38="        // 右のタイヤ（P13）と左のタイヤ（P15）を指定された速度で回転" line39="        pins.analogWritePin(AnalogPin.P13, speed);" line40="        pins.analogWritePin(AnalogPin.P15, speed);" line41="    }" line42="" line43="    /**" line44="     * 指定したタイヤを回す、または止めます。" line45="     * @param direction 操作するタイヤ（右:P13, 左:P15）" line46="     * @param action 行う動作（回す/止める）" line47="     */" line48="    //% block=&quot;%direction のタイヤを %action&quot;" line49="    //% group=&quot;モーター制御&quot;" line50="    export function controlTire(direction: TireDirection, action: TireAction): void {" line51="        const moveSpeed = 500; // 「回す」ときの速さ。この値を変更すると速さが変わります。" line52="        let targetPin: AnalogPin;" line53="        let output = 0;" line54="" line55="        // 操作するタイヤのピンを決定" line56="        if (direction == TireDirection.Left) {" line57="            targetPin = AnalogPin.P15;" line58="        } else {" line59="            targetPin = AnalogPin.P13;" line60="        }" line61="" line62="        // 行う動作に応じて出力を決定" line63="        if (action == TireAction.Move) {" line64="            output = moveSpeed;" line65="        } else {" line66="            output = 0;" line67="        }" line68="" line69="        // 決定したピンに出力を設定" line70="        pins.analogWritePin(targetPin, output);" line71="    }" line72="" line73="" line74="    // ===================================" line75="    // ここからセンサーのブロック" line76="    // ===================================" line77="" line78="    /**" line79="     * 指定した方向のセンサーが黒を検出したかどうかを判定します。" line80="     * センサーのアナログ値が700以上の場合に「黒」と判定します。" line81="     * @param direction 判定するセンサーの方向（右:P0, 左:P1）" line82="     */" line83="    //% block=&quot;%direction のセンサが黒だったら&quot;" line84="    //% group=&quot;センサー&quot;" line85="    export function isBlack(direction: SensorDirection): boolean {" line86="        const threshold = 700; // 黒と判定するアナログ値のしきい値" line87="        let sensorValue = 0;" line88="" line89="        if (direction == SensorDirection.Left) {" line90="            // 左センサー (P1) の値を読み取る" line91="            sensorValue = pins.analogReadPin(AnalogPin.P1);" line92="        } else {" line93="            // 右センサー (P0) の値を読み取る" line94="            sensorValue = pins.analogReadPin(AnalogPin.P0);" line95="        }" line96="" line97="        return sensorValue &gt;= threshold;" line98="    }" line99="}" numlines="100"></mutation></block></statement></block><block type="device_forever" id="2D0/ne,tpqC|Q*u~vGP_" x="896" y="212"><statement name="HANDLER"><block type="controls_if" id="yn51OD=_Z|G;=aWZNBvj"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="c=kv55r0Sl6NHtiXjp,2"><field name="BOOL">TRUE</field></shadow><block type="custom_isBlack" id="Jrg#}{.N(wgS7:~P4SZu"><field name="direction">custom.SensorDirection.Right</field></block></value><next><block type="controls_if" id="iYnn~jS-7,%!%GQz6ozA"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="nMG1~V.5a%HcaiR~VtkX"><field name="BOOL">TRUE</field></shadow><block type="custom_isBlack" id="SG3O^V)*/)kM|/#|9BvP"><field name="direction">custom.SensorDirection.Left</field></block></value></block></next></block></statement></block><block type="custom_controlTire" id="TEIXtmus#}8Q*fk{S]hi" disabled-reasons="ORPHANED_BLOCK,MANUALLY_DISABLED" x="997" y="898"><field name="direction">custom.TireDirection.Right</field><field name="action">custom.TireAction.Move</field></block></xml>